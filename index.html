<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∫ Crypto Analyzer - BTC | ETH | SOL</title>
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #f0f6fc;
            --text-secondary: #8b949e;
            --accent-green: #3fb950;
            --accent-red: #f85149;
            --accent-yellow: #d29922;
            --accent-blue: #58a6ff;
            --accent-purple: #a855f7;
            --accent-orange: #f97316;
            --border-color: #30363d;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        header h1 { font-size: 2rem; margin-bottom: 10px; }
        header .subtitle { color: var(--text-secondary); }
        
        /* Tab Navigation */
        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 15px 30px;
            border: 2px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: bold;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tab-btn:hover { border-color: var(--accent-blue); }
        .tab-btn.active { border-color: var(--accent-blue); background: var(--bg-tertiary); }
        .tab-btn.btc.active { border-color: var(--accent-orange); }
        .tab-btn.eth.active { border-color: var(--accent-purple); }
        .tab-btn.sol.active { border-color: var(--accent-green); }
        
        .tab-icon { font-size: 1.5rem; }
        
        /* Price Banner */
        .price-banner {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .price-banner .asset-name { font-size: 1.2rem; color: var(--text-secondary); }
        .price-banner .price { font-size: 2.5rem; font-weight: bold; }
        .price-banner.btc .price { color: var(--accent-orange); }
        .price-banner.eth .price { color: var(--accent-purple); }
        .price-banner.sol .price { color: var(--accent-green); }
        
        .price-banner .change { font-size: 1.1rem; margin-top: 5px; }
        .change.positive { color: var(--accent-green); }
        .change.negative { color: var(--accent-red); }
        
        .price-banner .market-data {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .market-data-item { text-align: center; }
        .market-data-item .label { font-size: 0.85rem; color: var(--text-secondary); }
        .market-data-item .value { font-weight: bold; }
        
        /* Grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
        }
        
        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .indicator-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--bg-tertiary);
        }
        
        .indicator-row:last-child { border-bottom: none; }
        .indicator-label { color: var(--text-secondary); font-size: 0.9rem; }
        .indicator-value { font-weight: 600; }
        
        .wyckoff-phase {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
        }
        
        .phase-status { font-size: 1.1rem; margin-right: 8px; }
        
        .scenario-box {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 12px;
            margin-top: 12px;
            text-align: center;
        }
        
        .scenario-box .scenario-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--accent-yellow);
        }
        
        .signal-box {
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
            font-size: 0.9rem;
        }
        
        .signal-long {
            background: rgba(63, 185, 80, 0.1);
            border: 1px solid var(--accent-green);
        }
        
        .signal-short {
            background: rgba(248, 81, 73, 0.1);
            border: 1px solid var(--accent-red);
        }
        
        .levels-list { list-style: none; }
        
        .levels-list li {
            padding: 6px 10px;
            margin: 4px 0;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }
        
        .resistance {
            background: rgba(248, 81, 73, 0.1);
            border-left: 3px solid var(--accent-red);
        }
        
        .support {
            background: rgba(63, 185, 80, 0.1);
            border-left: 3px solid var(--accent-green);
        }
        
        .current-price-level {
            background: rgba(88, 166, 255, 0.2);
            border-left: 3px solid var(--accent-blue);
            font-weight: bold;
        }
        
        .disclaimer {
            background: var(--bg-tertiary);
            border: 1px solid var(--accent-yellow);
            border-radius: 8px;
            padding: 15px;
            margin-top: 25px;
            text-align: center;
            font-size: 0.9rem;
        }
        
        .disclaimer h3 { color: var(--accent-yellow); margin-bottom: 8px; }
        
        .update-time {
            text-align: center;
            color: var(--text-secondary);
            padding: 20px;
            font-size: 0.9rem;
        }
        
        footer {
            text-align: center;
            padding: 25px;
            color: var(--text-secondary);
            border-top: 1px solid var(--border-color);
            margin-top: 30px;
        }
        
        .loading { text-align: center; padding: 50px; }
        
        .spinner {
            border: 4px solid var(--bg-tertiary);
            border-top: 4px solid var(--accent-blue);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        @media (max-width: 768px) {
            header h1 { font-size: 1.5rem; }
            .price-banner .price { font-size: 2rem; }
            .grid { grid-template-columns: 1fr; }
            .tab-btn { padding: 10px 15px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <header>
        <h1>üê∫ Crypto Analyzer</h1>
        <p class="subtitle">An√°lise T√©cnica: Wyckoff, Elliott Wave, Suportes e Resist√™ncias</p>
    </header>
    
    <div class="container">
        <div class="tabs">
            <button class="tab-btn btc active" onclick="switchTab('btc')">
                <span class="tab-icon">‚Çø</span> Bitcoin
            </button>
            <button class="tab-btn eth" onclick="switchTab('eth')">
                <span class="tab-icon">Œû</span> Ethereum
            </button>
            <button class="tab-btn sol" onclick="switchTab('sol')">
                <span class="tab-icon">‚óé</span> Solana
            </button>
        </div>
        
        <div id="btc-content" class="tab-content active">
            <div class="loading">
                <div class="spinner"></div>
                <p>Carregando BTC...</p>
            </div>
        </div>
        
        <div id="eth-content" class="tab-content">
            <div class="loading">
                <div class="spinner"></div>
                <p>Carregando ETH...</p>
            </div>
        </div>
        
        <div id="sol-content" class="tab-content">
            <div class="loading">
                <div class="spinner"></div>
                <p>Carregando SOL...</p>
            </div>
        </div>
        
        <div class="disclaimer">
            <h3>‚ö†Ô∏è DISCLAIMER</h3>
            <p>An√°lise <strong>educacional</strong>. N√£o √© recomenda√ß√£o de investimento. Use gerenciamento de risco.</p>
        </div>
        
        <div class="update-time" id="update-time"></div>
    </div>
    
    <footer>
        <p>Criado por Lobo üê∫ | Cultura Builder</p>
        <p style="margin-top: 8px; font-size: 0.85rem;">Dados: CoinGecko API | Auto-refresh: 5 min</p>
    </footer>

    <script>
        const COINGECKO_API = 'https://api.coingecko.com/api/v3';
        
        const ASSETS = {
            btc: { id: 'bitcoin', name: 'Bitcoin', symbol: 'BTC', color: 'orange' },
            eth: { id: 'ethereum', name: 'Ethereum', symbol: 'ETH', color: 'purple' },
            sol: { id: 'solana', name: 'Solana', symbol: 'SOL', color: 'green' }
        };
        
        let currentTab = 'btc';
        let dataCache = {};
        
        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            document.querySelector(`.tab-btn.${tab}`).classList.add('active');
            document.getElementById(`${tab}-content`).classList.add('active');
            
            if (!dataCache[tab]) {
                loadAsset(tab);
            }
        }
        
        async function fetchAssetData(assetKey) {
            const asset = ASSETS[assetKey];
            try {
                const [priceRes, histRes] = await Promise.all([
                    fetch(`${COINGECKO_API}/simple/price?ids=${asset.id}&vs_currencies=usd&include_24hr_change=true&include_market_cap=true&include_24hr_vol=true`),
                    fetch(`${COINGECKO_API}/coins/${asset.id}/market_chart?vs_currency=usd&days=200`)
                ]);
                
                const priceData = await priceRes.json();
                const histData = await histRes.json();
                
                return {
                    currentPrice: priceData[asset.id].usd,
                    change24h: priceData[asset.id].usd_24h_change,
                    marketCap: priceData[asset.id].usd_market_cap,
                    volume24h: priceData[asset.id].usd_24h_vol,
                    prices: histData.prices,
                    volumes: histData.total_volumes
                };
            } catch (error) {
                console.error(`Erro ao buscar ${assetKey}:`, error);
                return null;
            }
        }
        
        function calculateRSI(prices, period = 14) {
            const changes = [];
            for (let i = 1; i < prices.length; i++) {
                changes.push(prices[i] - prices[i-1]);
            }
            let gains = 0, losses = 0;
            for (let i = changes.length - period; i < changes.length; i++) {
                if (changes[i] > 0) gains += changes[i];
                else losses -= changes[i];
            }
            const avgGain = gains / period;
            const avgLoss = losses / period;
            if (avgLoss === 0) return 100;
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }
        
        function calculateSMA(prices, period) {
            const slice = prices.slice(-period);
            return slice.reduce((a, b) => a + b, 0) / period;
        }
        
        function analyzeWyckoff(prices, currentPrice) {
            const ath = Math.max(...prices);
            const atl = Math.min(...prices.slice(-90));
            const dropFromATH = ((ath - currentPrice) / ath) * 100;
            
            let scenario, probability;
            if (dropFromATH > 30) {
                scenario = 'DISTRIBUI√á√ÉO AVAN√áADA';
                probability = 70;
            } else if (dropFromATH > 20) {
                scenario = 'DISTRIBUI√á√ÉO';
                probability = 60;
            } else if (dropFromATH > 10) {
                scenario = 'POSS√çVEL DISTRIBUI√á√ÉO';
                probability = 50;
            } else if (dropFromATH < 5) {
                scenario = 'TEND√äNCIA DE ALTA';
                probability = 45;
            } else {
                scenario = 'INDEFINIDO';
                probability = 40;
            }
            
            return {
                ath, atl, dropFromATH, scenario, probability,
                phases: {
                    PSY: { status: '‚úÖ', desc: 'Preliminary Supply', price: ath * 0.95 },
                    BC: { status: '‚úÖ', desc: 'Buying Climax', price: ath },
                    AR: { status: dropFromATH > 10 ? '‚úÖ' : 'üîÑ', desc: 'Automatic Reaction', price: ath * 0.85 },
                    ST: { status: '‚ö†Ô∏è', desc: 'Secondary Test', price: ath * 0.92 },
                    SOW: { status: 'üîÑ', desc: 'Sign of Weakness', price: currentPrice },
                    LPSY: { status: 'üîú', desc: 'Last Point Supply', price: ath * 0.88 },
                    UTAD: { status: '‚ùì', desc: 'Upthrust After Dist', price: ath * 1.02 }
                }
            };
        }
        
        function calculateFibonacci(high, low) {
            const range = high - low;
            return {
                '23.6%': high - range * 0.236,
                '38.2%': high - range * 0.382,
                '50.0%': high - range * 0.500,
                '61.8%': high - range * 0.618,
                '78.6%': high - range * 0.786
            };
        }
        
        function formatNumber(num, decimals = 2) {
            if (num >= 1e12) return (num / 1e12).toFixed(decimals) + 'T';
            if (num >= 1e9) return (num / 1e9).toFixed(decimals) + 'B';
            if (num >= 1e6) return (num / 1e6).toFixed(decimals) + 'M';
            if (num >= 1e3) return (num / 1e3).toFixed(decimals) + 'K';
            return num.toFixed(decimals);
        }
        
        function renderAsset(assetKey, data) {
            const asset = ASSETS[assetKey];
            const prices = data.prices.map(p => p[1]);
            const currentPrice = data.currentPrice;
            const change24h = data.change24h;
            
            const rsi = calculateRSI(prices);
            const sma20 = calculateSMA(prices, 20);
            const sma50 = calculateSMA(prices, 50);
            const sma200 = calculateSMA(prices, Math.min(200, prices.length));
            
            const wyckoff = analyzeWyckoff(prices, currentPrice);
            const fib = calculateFibonacci(wyckoff.ath, wyckoff.atl);
            
            const changeClass = change24h >= 0 ? 'positive' : 'negative';
            const changeSign = change24h >= 0 ? '+' : '';
            
            let bias = 'NEUTRO';
            let biasColor = 'var(--accent-yellow)';
            if (rsi < 30) { bias = 'OVERSOLD'; biasColor = 'var(--accent-green)'; }
            else if (rsi > 70) { bias = 'OVERBOUGHT'; biasColor = 'var(--accent-red)'; }
            else if (currentPrice < sma200) { bias = 'BEARISH'; biasColor = 'var(--accent-red)'; }
            else if (currentPrice > sma50) { bias = 'BULLISH'; biasColor = 'var(--accent-green)'; }
            
            document.getElementById(`${assetKey}-content`).innerHTML = `
                <div class="price-banner ${assetKey}">
                    <div class="asset-name">${asset.name} (${asset.symbol})</div>
                    <div class="price">$${currentPrice.toLocaleString(undefined, {maximumFractionDigits: 2})}</div>
                    <div class="change ${changeClass}">${changeSign}${change24h.toFixed(2)}% (24h)</div>
                    <div class="market-data">
                        <div class="market-data-item">
                            <div class="label">Market Cap</div>
                            <div class="value">$${formatNumber(data.marketCap)}</div>
                        </div>
                        <div class="market-data-item">
                            <div class="label">Volume 24h</div>
                            <div class="value">$${formatNumber(data.volume24h)}</div>
                        </div>
                        <div class="market-data-item">
                            <div class="label">ATH</div>
                            <div class="value">$${wyckoff.ath.toLocaleString(undefined, {maximumFractionDigits: 0})}</div>
                        </div>
                        <div class="market-data-item">
                            <div class="label">Queda ATH</div>
                            <div class="value" style="color: var(--accent-red)">${wyckoff.dropFromATH.toFixed(1)}%</div>
                        </div>
                    </div>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h2>üìä Indicadores</h2>
                        <div class="indicator-row">
                            <span class="indicator-label">RSI (14)</span>
                            <span class="indicator-value" style="color: ${rsi < 30 ? 'var(--accent-green)' : rsi > 70 ? 'var(--accent-red)' : 'inherit'}">${rsi.toFixed(1)}</span>
                        </div>
                        <div class="indicator-row">
                            <span class="indicator-label">SMA 20</span>
                            <span class="indicator-value">$${sma20.toLocaleString(undefined, {maximumFractionDigits: 2})}</span>
                        </div>
                        <div class="indicator-row">
                            <span class="indicator-label">SMA 50</span>
                            <span class="indicator-value">$${sma50.toLocaleString(undefined, {maximumFractionDigits: 2})}</span>
                        </div>
                        <div class="indicator-row">
                            <span class="indicator-label">SMA 200</span>
                            <span class="indicator-value">$${sma200.toLocaleString(undefined, {maximumFractionDigits: 2})}</span>
                        </div>
                        <div class="indicator-row">
                            <span class="indicator-label">Vi√©s</span>
                            <span class="indicator-value" style="color: ${biasColor}">${bias}</span>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h2>üìâ An√°lise Wyckoff</h2>
                        ${Object.entries(wyckoff.phases).map(([phase, d]) => `
                            <div class="wyckoff-phase">
                                <span><span class="phase-status">${d.status}</span> <strong>${phase}</strong></span>
                                <span style="color: var(--accent-blue);">$${d.price.toLocaleString(undefined, {maximumFractionDigits: 0})}</span>
                            </div>
                        `).join('')}
                        <div class="scenario-box">
                            <div class="scenario-name">${wyckoff.scenario}</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">Prob: ${wyckoff.probability}%</div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h2>üìê Fibonacci</h2>
                        ${Object.entries(fib).map(([level, price]) => `
                            <div class="indicator-row">
                                <span class="indicator-label">${level}</span>
                                <span class="indicator-value">$${price.toLocaleString(undefined, {maximumFractionDigits: 2})}</span>
                            </div>
                        `).join('')}
                    </div>
                    
                    <div class="card">
                        <h2>üéØ N√≠veis</h2>
                        <ul class="levels-list">
                            <li class="resistance"><span>üî¥ ATH</span><span>$${wyckoff.ath.toLocaleString(undefined, {maximumFractionDigits: 0})}</span></li>
                            <li class="resistance"><span>üî¥ SMA 200</span><span>$${sma200.toLocaleString(undefined, {maximumFractionDigits: 0})}</span></li>
                            <li class="current-price-level"><span>üìç Atual</span><span>$${currentPrice.toLocaleString(undefined, {maximumFractionDigits: 2})}</span></li>
                            <li class="support"><span>üü¢ Fib 61.8%</span><span>$${fib['61.8%'].toLocaleString(undefined, {maximumFractionDigits: 0})}</span></li>
                            <li class="support"><span>üü¢ Fib 78.6%</span><span>$${fib['78.6%'].toLocaleString(undefined, {maximumFractionDigits: 0})}</span></li>
                        </ul>
                    </div>
                </div>
                
                <div class="grid">
                    <div class="card">
                        <h2>üìà Sinais LONG</h2>
                        <div class="signal-box signal-long">
                            <strong>Agressivo:</strong> $${(currentPrice * 0.95).toLocaleString(undefined, {maximumFractionDigits: 2})}<br>
                            <small>SL: $${(currentPrice * 0.92).toLocaleString(undefined, {maximumFractionDigits: 0})} | TP: $${(currentPrice * 1.10).toLocaleString(undefined, {maximumFractionDigits: 0})} | R/R: 1:3</small>
                        </div>
                        <div class="signal-box signal-long">
                            <strong>Conservador (Fib 61.8%):</strong> $${fib['61.8%'].toLocaleString(undefined, {maximumFractionDigits: 2})}<br>
                            <small>SL: $${fib['78.6%'].toLocaleString(undefined, {maximumFractionDigits: 0})} | TP: $${sma50.toLocaleString(undefined, {maximumFractionDigits: 0})} | R/R: 1:4</small>
                        </div>
                        <div class="signal-box signal-long">
                            <strong>Gift (Fib 78.6%):</strong> $${fib['78.6%'].toLocaleString(undefined, {maximumFractionDigits: 2})}<br>
                            <small>SL: $${(fib['78.6%'] * 0.95).toLocaleString(undefined, {maximumFractionDigits: 0})} | TP: $${sma200.toLocaleString(undefined, {maximumFractionDigits: 0})} | R/R: 1:5+</small>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h2>üìâ Sinais SHORT</h2>
                        <div class="signal-box signal-short">
                            <strong>SMA 20:</strong> $${sma20.toLocaleString(undefined, {maximumFractionDigits: 2})}<br>
                            <small>SL: $${(sma20 * 1.03).toLocaleString(undefined, {maximumFractionDigits: 0})} | TP: $${(currentPrice * 0.90).toLocaleString(undefined, {maximumFractionDigits: 0})} | R/R: 1:3</small>
                        </div>
                        <div class="signal-box signal-short">
                            <strong>Fib 38.2%:</strong> $${fib['38.2%'].toLocaleString(undefined, {maximumFractionDigits: 2})}<br>
                            <small>SL: $${fib['23.6%'].toLocaleString(undefined, {maximumFractionDigits: 0})} | TP: $${fib['61.8%'].toLocaleString(undefined, {maximumFractionDigits: 0})} | R/R: 1:3</small>
                        </div>
                        <div class="signal-box signal-short">
                            <strong>LPSY Wyckoff:</strong> $${(wyckoff.ath * 0.88).toLocaleString(undefined, {maximumFractionDigits: 2})}<br>
                            <small>SL: $${(wyckoff.ath * 0.92).toLocaleString(undefined, {maximumFractionDigits: 0})} | TP: $${(wyckoff.ath * 0.60).toLocaleString(undefined, {maximumFractionDigits: 0})} | R/R: 1:7</small>
                        </div>
                    </div>
                </div>
            `;
            
            dataCache[assetKey] = data;
        }
        
        async function loadAsset(assetKey) {
            const data = await fetchAssetData(assetKey);
            if (data) {
                renderAsset(assetKey, data);
            } else {
                document.getElementById(`${assetKey}-content`).innerHTML = `
                    <div class="card" style="text-align: center;">
                        <h2>‚ùå Erro ao carregar ${ASSETS[assetKey].name}</h2>
                        <p>Tente novamente em alguns minutos.</p>
                        <button onclick="loadAsset('${assetKey}')" style="margin-top: 15px; padding: 10px 20px; cursor: pointer;">Recarregar</button>
                    </div>
                `;
            }
        }
        
        async function init() {
            await loadAsset('btc');
            document.getElementById('update-time').innerHTML = `
                <p>√öltima atualiza√ß√£o: ${new Date().toLocaleString('pt-BR')}</p>
            `;
        }
        
        init();
        setInterval(() => {
            loadAsset(currentTab);
            document.getElementById('update-time').innerHTML = `
                <p>√öltima atualiza√ß√£o: ${new Date().toLocaleString('pt-BR')}</p>
            `;
        }, 5 * 60 * 1000);
    </script>
</body>
</html>
